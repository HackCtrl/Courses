*В ОС Linux есть встроенный инструментарий для сбора статистики о работе системы* 
#### ***Мониторинг производительности: `vmstat`***

***Вывод команды:*** 
![[Pasted image 20251215220231.png]]

- `vmstat` с кличем `w` используют для вывода расширенной информации, а с `s` - для вывода общей статистики использования памяти ядра и основных подсистем виртуальной памяти 
![[Pasted image 20251215220509.png]]
- Чтобы увидеть изменения нагрузки в динамике, используем команду `vmstаt x`, где `x` - интервал в секундах, с которым утилита будет опрашивать и выводить новые значения 
#### ***Процессор: `top`***

- Для сортировки процессов по использованию CPU: команды `top` и сочетание `Shift + P`. После нажатия `Shift + m` процессы отобразятся в порядке убывания использования памяти 
![[Pasted image 20251215221024.png]]
![[Pasted image 20251215221040.png]]

- Для просмотра загрузки каждого ядра процессора: команда `top` и клик по `1`. Плюс этой опции в том, что вы получаете данные по ядрам в отдельности - это полезно при мониторинге многоядерных систем 
![[Pasted image 20251215221247.png]]
#### ***Оперативная память: `free`***

*Это команда предоставляет информацию об использовании оперативной памяти*
1. Человекочитабельный формат: для более удобного отображения в гигабайтах используем ключ `h` - `free -h`
2. Ключ `s N` выводит дополнительную статистику об использовании оперативной памяти и означает обновление каждые N секунды. Например `free -s 2` обновляет данные каждые две секунды 
3. Ключ `t` показывает итоговую строку суммарно по всем столбцам 
![[Pasted image 20251215221800.png]]
#### ***Жёсткий диск: `df`***

`df` — disk free. Команда показывает данные о доступном месте на диске
- Человекочитаемый формат: для более удобного чтения добавьте ключ `h` — `df -h`.
- Ключ `a` в `df` отображает информации о всех файловых системах — включая те, что обычно не отображаются по умолчанию.
- Ключ `T` показывает тип файловой системы для каждой точки монтирования.
- Ключ `x` позволяет исключить определённые типы файловых систем из отображения. Так, например, мы исключим файловые системы типа `tmpfs` из вывода: `df -x tmpfs`
![[Pasted image 20251215222035.png]]
![[Pasted image 20251215222047.png]]
#### ***Сетевая активность***

`ip` - предназначена для настройки сетевых интерфейсов, но может предоставлять и данные 
- С помощью `ip route show` можно посмотреть текущие маршруты IP-адресов на вашей системе 
- Статистику по сетевым интерфейсам покажет ключ `s`: `ip -s link show`
- Еще ключ `s` можно использовать для отображения статистики по IP-адресам на каждом интерфейсе `ip -s address show`
![[Pasted image 20251215222435.png]]

`ss` (Socket Statistics) - утилита командной строки, которая предоставляет информацию о сокете: открытые порты, соединения TCP/UDP, маршрутизации и различные сетевые интерфейсы 
- `tuln` показывает все открытые TCP/UDP-сокеты без разрешения имён: `ss -tuln`.
- `s` даёт общую статистику использования сокетов, что полезно при мониторинге активности сетевых соединений. Так, команда `ss -s` покажет данные по используемым сокетам на системе.
- Фильтрация по состоянию соединения `state established` помогает выделить активные соединения, что облегчает отслеживание текущих сессий: `ss state established`.
- `dst` быстро выявляет активные соединения с определённым узлом в сети. К примеру, команда `ss dst &lt;IP-адрес&gt;` покажет все соединения к указанному IP-адресу: `ss dst 192.168.1.1`.
- `i` предоставляет информацию о сетевых интерфейсах и маршрутизации, сетевой конфигурации сервера. Так можно получить данные о сетевых интерфейсах, маршрутизации и статистике пакетов: `ss -i`.
- `p` выводит связанные с PID-соединениями имена процессов, что полезно при отслеживании взаимодействующих по сети процессов: `ss -p`
![[Pasted image 20251215222820.png]]
![[Pasted image 20251215222902.png]]
![[Pasted image 20251215222924.png]]
![[Pasted image 20251215223016.png]]
![[Pasted image 20251215223037.png]]

`Tcpdump` - утилита командной строки, используемая для захвата и анализа пакетов сети
- `-i` захватывает трафик на определённом интерфейсе. Так, `eth0` в `tcpdump -i eth0` — имя сетевого интерфейса.
- `-n` выводит IP-адреса числами: `tcpdump -n`.
- `-s` ограничивает размер захватываемых пакетов. К примеру, до 128 байт: `tcpdump -s 128`. Такая функция полезна для уменьшения нагрузки на систему при обработке большого объёма трафика.


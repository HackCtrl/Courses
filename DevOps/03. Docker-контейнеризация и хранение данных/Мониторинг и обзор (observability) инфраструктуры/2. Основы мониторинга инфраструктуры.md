***Система мониторинга*** - это специальное ПО или инструменты, предназначенные для наблюдения, контроля и управления IT-инфраструктурой компании 

***Основные функции мониторинга:*** 
1. Раннее обнаружение проблем и их предотвращение 
2. Оптимизация производительности системы 
3. Обеспечение доступности и надежности сервисов 
4. Планирование емкости и масштабирование системы 

***Виды систем мониторинга:*** 

- ***Агентные системы мониторинга*** - используют специальные небольшие программы, установленные на управляемых узлах или серверах, - их называют агентами. Агенты собирают данные о состоянии системы, ее производительности, статусе служб и так далее и передают их на центральный сервер для обработки и анализа 
***Пример такой системы*** — Zabbix, она использует агентов для сбора информации о производительности систем и сети. Установленные на устройствах, её агенты периодически отправляют метрики на сервер Zabbix

- ***Системы мониторинга с прокси-агентами*** - собирают данные о работе серверов и устройств локальной сети. Прокси-агенты передают информацию на центральный сервер, обеспечивая мониторинг множества устройств с учетом географической дистанции и доступности контролируемых объектов 
***В качестве примера*** здесь можно привести PRTG Network Monitor. Его прокси-агенты находятся в разных сегментах сети, что позволяет собирать статистику о нагрузке и состоянии из разных мест и передавать её на центральный сервер

***Чем эти системы отличаются друг от друга:*** 
![[Pasted image 20251220110853.png]]

- ***Безагентовые системы*** -  собирают информацию через сетевые протоколы или API, то есть без установки агента на монтируемых устройствах 
***Например***, безагентный подход использует Nagios

- ***Системы мониторинга инфраструктуры как кода*** - позволяют настраивать мониторинг и управлять им как кодом. Мониторинг в этом случае интегрируется в процессы автоматизации конфигурации инфраструктуры. В сочетании с инструментами CI/CD такие системы могут автоматически добавлять новые мониторинговые ресурсы и настройки в случае изменений в инфраструктуре 

***CI/CD*** - это подход к разработке ПО, который состоит из двух этапов: 
- Непрерывной интеграции (Continuous Integration, CI)
- Непрерывной доставки (Continuous Delivery/Deployment, CD) - по-другому ее называют развертыванием 

*Популярную систему мониторинга Prometheus можно интегрировать с инструментами управления конфигурацией вроде Ansible, Puppet или Chef. В результате у нас появится возможность настраивать правила сбора метрик, автоматизации создания отслеживаемых объектов и самого мониторинга в коде*

***Понятие четырех золотых сигналов мониторинга:*** 
![[Pasted image 20251220111940.png]]

***Компоненты:*** 
1. Задержка (latency) - время за которое выполняется запрос или операция в системе. Низкая задержка означает, что система быстро отвечает на запросы пользователей. Высокая может сигнализировать о проблемах с производительностью или нагрузкой на систему 
2. Трафик (traffic) - количество запросов или данных, пересылаемых через систему за определенное время. Мониторинг трафика помогает понять нагрузку на систему, выявить резкие изменения в активности пользователей и спланировать емкость системы в соответствии в объемом трафика 
3. Ошибки (errors) - процент ошибочных запросов или действие, возникающих в системе. Помогает выявить проблемные участки в системе и принять меры по исправлению и улучшению качества обслуживания 
4. Загруженность (saturation) - степень загрузки ресурсов: процессора, памяти, сетевых соединений и других. Помогает избежать перегрузок и бутылочных горлышек в работе системы, которые приводят к снижению производительности и простоям 

***Этим системный администратор не ограничивается. Важно не только то, что мы анализируем, но и как мы это делаем:*** 
- Определиться с ключевыми показателями 
- Установить пороговое значение 
- Интерпретировать данные 
- Настроить систему уведомлений и алертинга 

***Несколько рекомендаций, которые могут не потеряться в показателях:*** 
- Фокусироваться на главном 
- Использовать визуализацию 
- Планировать анализ и действия 
- Вести документацию и обращаться к открытым источникам 

***Примеры:*** 
#### ***Ситуация №1***

Мониторинг сервера баз данных.

1. **Процент загрузки ЦПУ (CPU Utilization).**
    - Цель: мониторинг использования сервером процессора.
    - Важность: для оптимизации запросов к БД, масштабирования и выявления узких мест.
2. **Использование памяти (Memory Usage).**
    - Цель: контроль потребления оперативной памяти сервером баз данных.
    - Важность: позволяет предотвращать ситуации нехватки памяти, оптимизировать кэширование данных.
3. **Ввод-вывод диска (Disk I/O).**
    - Цель: отслеживание скорости чтения и записи данных на диск.
    - Важность: помогает находить узкие места ввода-вывода, оптимизировать хранилища данных, избегать проблем с производительностью.
4. **Доступность базы данных (Database Availability).**
    - Цель: отслеживание времени, в течение которого база данных доступна.
    - Важность: позволяет быстро реагировать на сбои и тем самым обеспечивать непрерывную работу сервисов.
5. **Количество соединений (Connections).**
    - Цель: мониторинг количества активных соединений с базой данных.
    - Важность: для оптимизации пула соединений, предотвращения перегрузки сервера и поддержания стабильной работы.
6. **Скорость запросов (Query Performance).**
    - Цель: измерение времени выполнения запросов к базе данных.
    - Важность: помогает выявлять медленные запросы, оптимизировать индексы и структуру данных, и, как следствие — повышать производительность.
#### **Ситуация №2**

Мониторинг центрального маршрутизатора компании, который также используется для подключения филиалов к главному офису.

1. **Использование ресурсов (Resource Utilization).**
    - Цель: мониторинг использования ресурсов маршрутизатора — его процессора, памяти, дисков.
    - Важность: позволяет оптимизировать работу устройства, предотвращать перегрузки и поддерживать стабильную работу сети.
2. **Соединения и потоки трафика (Connections & Traffic Flows).**
    - Цель: мониторинг количества активных соединений и уровня сетевого трафика.
    - Важность: для контроля сетевой нагрузки, выявления аномалий и прогнозирования трафика.
3. **Статус интерфейсов и портов (Interface Status).**
    - Цель: отслеживание состояния сетевых интерфейсов и портов маршрутизатора.
    - Важность: помогает оперативно реагировать на проблемы с соединениями, выявлять неисправности и обеспечивать непрерывную связь.
4. **Задержка (Delay).**
    - Цель: измерение времени передачи данных через маршрутизатор.
    - Важность: для контроля задержки в сети, качественной передачи данных, оптимизации маршрутизации.
5. **Состояние VPN-туннелей (VPN Tunnels Status).**
    - Цель: отслеживание статуса VPN-туннелей между центральным маршрутизатором и филиалами.
    - Важность: гарантирует безопасное и надёжное соединение между офисами, обеспечивает конфиденциальность и целостность данных.
#### **Ситуация №3**

Мониторинг веб-сайта.

1. **Латентность (Latency).**
    
    - Цель: отслеживание времени отклика сервера на запросы пользователей.
    - Важность: низкая латентность обеспечивает быструю загрузку страниц — это положительно сказывается на пользовательском опыте и SEO-рейтинге.

***SEO-рейтинг (Search Engine Optimization — «поисковая оптимизация»)*** - отражает, насколько сайт эффективен и как он взаимодействует с поисковыми системами вроде Google и Яндекса. Чем выше этот показатель, тем больше у сайта шансов попасть на первые страницы поисковой выдачи по запросам, связанным с его тематикой 

2. **Доступность (Uptime).**
    - Цель: мониторинг времени, в течение которого веб-сайт доступен пользователям.
    - Важность: высокая доступность гарантирует непрерывную работу сайта и предотвращает потерю трафика и клиентов из-за простоев.
3. **Трафик (Traffic).**
    - Цель: измерение количества посетителей, просматривающих сайт.
    - Важность: позволяет понять популярность сайта, определить пиковые нагрузки, планировать масштабирование.
4. **Ошибки (Errors).**
    - Цель: отслеживание числа ошибок, возникающих на сайте при обработке запросов.
    - Важность: помогает оперативно реагировать на проблемы, выявлять уязвимые места и поддерживать стабильную работу сайта.
5. **Пропускная способность (Throughput).**
    - Цель: измерение количества данных, которые могут быть переданы через веб-сервер за определённый период времени.
    - Важность: для оценки производительности сервера и выявления узких мест при обработке запросов.
6. **Код состояния HTTP (HTTP Status Codes).**
    - Цель: мониторинг кодов состояния сервера (например, `200` — для успешного ответа, `404` — для «Страница не найдена»).
    - Важность: позволяет выявлять проблемы с доступностью или обработкой страниц и оперативно их решать.
7. **Ресурсы и использование (Resource Usage).**
    - Цель: отслеживание использования ресурсов — CPU, памяти, дискового пространства сервера.
    - Важность: помогает оптимизировать нагрузку на сервер, предотвращать перегрузки и поддерживать стабильную работу.